<button mat-icon-button [matMenuTriggerFor]="notificationMenu" class="notification-button">
  <mat-icon [matBadge]="unreadCount" [matBadgeHidden]="unreadCount === 0" matBadgeColor="warn">
    notifications
  </mat-icon>
</button>

<mat-menu #notificationMenu="matMenu" class="notification-menu">
  <div class="notification-header" (click)="$event.stopPropagation()">
    <h3>Notifications</h3>
    <button mat-button color="primary" (click)="markAllAsRead()" *ngIf="unreadCount > 0">
      Mark all as read
    </button>
  </div>
  
  <mat-divider></mat-divider>
  
  <div class="notification-list" *ngIf="getDisplayedNotifications().length > 0">
    <button 
      mat-menu-item 
      *ngFor="let notification of getDisplayedNotifications()" 
      class="notification-item"
      [class.unread]="isUnread(notification)"
      (click)="markAsRead(notification)">
      
      <div class="notification-content">
        <div class="notification-icon-text">
          <span class="notification-type-icon">{{ getNotificationIcon(notification.type) }}</span>
          <div class="notification-text">
            <p class="notification-message">{{ notification.message }}</p>
            <span class="notification-claim">Claim: {{ notification.claimNumber }}</span>
            <span class="notification-time">{{ formatDate(notification.createdAt) }}</span>
          </div>
        </div>
        <mat-icon *ngIf="isUnread(notification)" class="unread-indicator">fiber_manual_record</mat-icon>
      </div>
    </button>
  </div>
  
  <div class="no-notifications" *ngIf="getDisplayedNotifications().length === 0" (click)="$event.stopPropagation()">
    <mat-icon>notifications_none</mat-icon>
    <p>No notifications yet</p>
  </div>
  
  <mat-divider *ngIf="getDisplayedNotifications().length > 0"></mat-divider>
  
  <div class="notification-footer" *ngIf="!isConnected" (click)="$event.stopPropagation()">
    <mat-icon class="offline-icon">cloud_off</mat-icon>
    <span class="offline-text">Real-time updates offline</span>
  </div>
  
  <div class="notification-footer online" *ngIf="isConnected" (click)="$event.stopPropagation()">
    <mat-icon class="online-icon">cloud_done</mat-icon>
    <span class="online-text">Real-time updates active</span>
  </div>
</mat-menu>
